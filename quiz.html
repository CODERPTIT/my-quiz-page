<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Quiz Kiến Trúc Máy Tính</title>
  <style>
    :root {
      --primary-color: #4a69bd;
      --secondary-color: #6a85b6;
      --correct-color: #2ecc71;
      --incorrect-color: #e74c3c;
      --skipped-color: #f39c12;
      --light-bg: #f4f4f9;
      --white-color: #ffffff;
      --dark-text: #333;
      --background-image-url: url('https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1740&auto=format&fit=crop');
    }

    body { 
      font-family: sans-serif; color: var(--dark-text); background-image: var(--background-image-url);
      background-size: cover; background-position: center center; background-attachment: fixed;
      margin: 0; padding: 0;
    }

    header { 
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: var(--white-color); padding: 30px 20px; text-align: center; 
      font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .main-content {
        display: flex; flex-direction: column; align-items: center; padding: 20px;
        min-height: calc(100vh - 97px); 
    }
    
    /*
     ==================================================================
     ===> CẢI TIẾN: KHUNG CHỨA CÁC NÚT ĐIỀU KHIỂN GÓC PHẢI      <===
     ==================================================================
    */
    .top-right-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001; /* Đảm bảo cao hơn các lớp khác */
      display: flex;
      align-items: center;
      gap: 20px; /* Khoảng cách giữa nút nhạc và translate */
    }

    #toggle-audio {
        /* Bỏ position: fixed vì đã có container cha */
        position: relative; 
        width: 50px; height: 50px; background: rgba(255, 255, 255, 0.9); border-radius: 50%;
        border: none; cursor: pointer; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        display: flex; justify-content: center; align-items: center; transition: all 0.3s ease;
    }
    #toggle-audio:hover { transform: scale(1.1); }
    #toggle-audio svg { width: 24px; height: 24px; fill: #333; }
    
    #playlist {
        position: fixed; top: 80px; right: 20px; background: var(--white-color); border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); padding: 10px; z-index: 999;
        width: 220px; display: none;
    }
    .playlist-item { padding: 12px 15px; cursor: pointer; border-radius: 6px; transition: background-color 0.2s; font-size: 0.9em; color: #333; }
    .playlist-item:hover { background-color: #f0f0f0; }
    .playlist-item.playing { background-color: var(--primary-color); color: var(--white-color); font-weight: bold; }

    /* Làm cho widget của Google Translate trông đẹp hơn */
    #google_translate_element .goog-te-gadget-simple {
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid #ccc;
      border-radius: 20px;
      padding: 8px 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    #google_translate_element .goog-te-gadget-icon {
          display: inline-block !important; /* Ẩn icon Google */
    }
    .goog-te-gadget-simple span {
      color: #333 !important;
    }


    .card-container {
        width: 100%; max-width: 1200px;
        background: rgba(255, 255, 255, 0.97); padding: 30px; border-radius: 12px; 
        box-shadow: 0 4px 25px rgba(0,0,0,0.15); margin: 20px;
    }
    
    #start-screen { max-width: 800px; }
    #final-result-container { max-width: 800px; display: none; }
    
    #chapter-selection { text-align: center; }
    #chapter-selection label { margin-right: 10px; font-size: 1.1em;}
    #chapter-selection select, #chapter-selection button { padding: 10px 15px; font-size: 1em; border-radius: 8px; border: 1px solid #ccc; margin: 5px; }
    #start-quiz { background-color: var(--primary-color); color: var(--white-color); border-color: var(--primary-color); cursor: pointer; transition: background-color 0.3s; }
    #start-quiz:hover { background-color: var(--secondary-color); }
    
    #quiz-layout { display: flex; gap: 30px; }
    #main-quiz-area { flex: 3; }
    #question-nav-panel {
        flex: 1; background-color: var(--light-bg); border-radius: 8px;
        padding: 15px; align-self: flex-start; 
    }
    #question-nav-panel h3 { margin-top: 0; text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 15px; }
    .nav-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); gap: 10px; }
    .nav-question-btn {
        width: 100%; height: 45px; border: 1px solid #ccc; background-color: var(--white-color);
        border-radius: 5px; cursor: pointer; transition: all 0.2s ease; font-weight: bold;
    }
    .nav-question-btn:hover { transform: translateY(-2px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .nav-question-btn.current-question { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
    .nav-question-btn.answered-correct { background-color: var(--correct-color); color: white; border-color: var(--correct-color); }
    .nav-question-btn.answered-incorrect { background-color: var(--incorrect-color); color: white; border-color: var(--incorrect-color); }
    .nav-question-btn.answered-skipped { background-color: var(--skipped-color); color: white; border-color: var(--skipped-color); }

    .quiz-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px;
    }
    .quiz-header h2 { margin: 0; font-size: 1.6em; }
    #score-counter { margin: 0; font-size: 1em; font-weight: bold; background-color: var(--light-bg); padding: 8px 15px; border-radius: 20px; color: var(--primary-color); }
    #question h3 { margin-top: 0; font-size: 1.4em; }
    .options label { display: block; background: var(--light-bg); margin: 10px 0; padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; border: 1px solid transparent; }
    .options label.disabled { cursor: not-allowed; opacity: 0.7; }
    .options label:not(.disabled):hover { background: #e2e2e2; transform: translateY(-2px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .options input[type="radio"] { display: none; }
    
    .button-group { margin-top: 20px; }
    .button-group button { padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px; font-size: 1em; transition: all 0.3s ease; }
    .button-group button:hover { opacity: 0.9; transform: translateY(-2px); }
    #submit { display: none; }
    #next-btn { background-color: var(--primary-color); color: white; }
    #skip { background-color: var(--incorrect-color); color: white; }
    #back { background-color: #ff9800; color: white; }
    
    #result { margin-top: 20px; font-size: 1.2em; }
    .correct { color: var(--correct-color); font-weight: bold; }
    .incorrect { color: var(--incorrect-color); font-weight: bold; }
    label.correct { background-color: #d4edda !important; border-color: #c3e6cb; }
    label.incorrect { background-color: #f8d7da !important; border-color: #f5c6cb; }
    
    #final-result { text-align: center; }
  </style>
</head>
<body>
  <header>
    KIẾN TRÚC MÁY TÍNH
  </header>
  
  <div class="top-right-controls">
    <div id="google_translate_element"></div>
    <button id="toggle-audio" title="Bật/Tắt nhạc">
      <svg class="icon-on" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
      <svg class="icon-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display:none;"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
    </button>
  </div>
  <div id="playlist"></div>

  <div class="main-content">
    <div id="start-screen" class="card-container">
      <div id="chapter-selection">
        <label for="chapter-select">Chọn chương:</label>
        <select id="chapter-select">
          <option value="all">Tất cả</option>
          <option value="1">Chương 1: Tổng quan</option>
          <option value="2">Chương 2: Biểu diễn dữ liệu</option>
          <option value="3">Chương 3: CPU</option>
          <option value="4">Chương 4: Bộ nhớ</option>
        </select>
        <button id="start-quiz">Bắt đầu</button>
      </div>
    </div>

    <div class="card-container" id="quiz-container" style="display: none;">
        <div id="quiz-layout">
            <div id="main-quiz-area">
                <div class="quiz-header"><h2>Câu hỏi trắc nghiệm</h2><div id="score-counter">Đã làm: 0/0</div></div>
                <div id="question"></div>
                <div class="options" id="options"></div>
                <div id="result"></div>
                <div class="button-group" id="controls">
                    <button id="submit">Nộp</button>
                    <button id="skip">Bỏ qua</button>
                    <button id="back">Quay lại</button>
                </div>
            </div>
            <div id="question-nav-panel">
                <h3>Danh sách câu hỏi</h3>
                <div id="nav-grid" class="nav-grid"></div>
            </div>
        </div>
    </div>
    
    <div class="card-container" id="final-result-container">
        <div id="final-result"></div>
    </div>
  </div>

  <audio id="background-music"></audio>
  
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'vi', 
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
    }
  </script>

  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


  <script>
    const questions = [
        // CHUONG 1
//P1
    {
        "question": "What does the term \"instruction set architecture\" (ISA) refer to in computer architecture? (chương 1)",
        "options": {
        "A": "The design of input devices",
        "B": "A set of protocols for internet communication",
        "C": "Programming languages for software development",
        "D": "The set of machine language commands a CPU can execute"
        },
        "correct": "D"
    },
    {
        "question": "What is the purpose of the MMU (Memory Management Unit) in computer architecture? (chương 1)",
        "options": {
        "A": "Executing arithmetic and logic operations",
        "B": "Controlling the flow of data within the CPU",
        "C": "Translating virtual addresses to physical addresses",
        "D": "Managing input/output devices"
        },
        "correct": "C"
    },
    {
        "question": "What is the purpose of a memory hierarchy in computer architecture? (chương 1)",
        "options": {
        "A": "Managing input/output operations",
        "B": "Increasing the size of virtual memory",
        "C": "Enhancing data access speed by using different types of memory",
        "D": "Minimizing CPU clock speed"
        },
        "correct": "C"
    },
    {
        "question": "What role does the program counter (PC) play in the CPU? (chương 1)",
        "options": {
        "A": "Controlling input/output devices",
        "B": "Storing the current instruction being executed",
        "C": "Handling network communication",
        "D": "Managing memory storage"
        },
        "correct": "B"
    },
    {
        "question": "Which of the following is a common feature of Reduced Instruction Set Computing (RISC) architectures? (chương 1)",
        "options": {
        "A": "Complex instruction decoding",
        "B": "Large instruction set",
        "C": "Limited clock speed",
        "D": "Emphasis on simplicity and efficiency"
        },
        "correct": "D"
    },
    {
        "question": "Which of the following is an example of a parallel processing architecture? (chương 1)",
        "options": {
        "A": "Multi-core processor",
        "B": "Single-core processor",
        "C": "Dual-core processor",
        "D": "Quad-core processor"
        },
        "correct": "A"
    },
    {
        "question": "What is the role of the input/output (I/O) subsystem in computer architecture? (chương 1)",
        "options": {
        "A": "Facilitating communication between the CPU and external devices",
        "B": "Controlling power supply",
        "C": "Managing memory access",
        "D": "Executing arithmetic operations"
        },
        "correct": "A"
    },
    {
        "question": "In computer architecture, what is the significance of the clock speed of a CPU? (chương 1)",
        "options": {
        "A": "Managing power consumption",
        "B": "Determining the amount of cache memory",
        "C": "Controlling the display resolution",
        "D": "Measuring the processor's performance in executing instructions per second"
        },
        "correct": "D"
    },
    {
        "question": "What is the purpose of the control unit in the CPU? (chương 1)",
        "options": {
        "A": "Handling network communication",
        "B": "Performing arithmetic calculations",
        "C": "Managing memory storage",
        "D": "Controlling the flow of data within the CPU"
        },
        "correct": "D"
    },
    {
        "question": "Which technology is commonly used to improve processor performance by executing multiple instructions simultaneously? (chương 1)",
        "options": {
        "A": "Parallel processing",
        "B": "Virtualization",
        "C": "Pipelining",
        "D": "Quantum computing"
        },
        "correct": "C"
    },
    {
        "question": "What role does the ALU (Arithmetic Logic Unit) play in the CPU? (chương 1)",
        "options": {
        "A": "Controlling input and output devices",
        "B": "Executing arithmetic and logic operations",
        "C": "Managing memory access",
        "D": "Handling network protocols"
        },
        "correct": "B"
    },
    {
        "question": "Which addressing mode involves specifying the address of the operand in the instruction itself? (chương 1)",
        "options": {
        "A": "Register addressing",
        "B": "Direct addressing",
        "C": "Indirect addressing",
        "D": "Immediate addressing"
        },
        "correct": "D"
    },
    {
        "question": "Which component is responsible for temporarily storing data that the CPU needs during operations? (chương 1)",
        "options": {
        "A": "Hard disk",
        "B": "ROM (Read-Only Memory)",
        "C": "RAM (Random Access Memory)",
        "D": "Cache memory"
        },
        "correct": "D"
    },
    {
        "question": "What does the term \"von Neumann architecture\" refer to in computer systems? (chương 1)",
        "options": {
        "A": "A network communication protocol",
        "B": "A type of secondary storage",
        "C": "An algorithm for sorting data",
        "D": "A design where program instructions and data share the same memory"
        },
        "correct": "D"
    },
    {
        "question": "What is the primary function of a CPU in computer architecture? (chương 1)",
        "options": {
        "A": "Arithmetic and logic operations",
        "B": "Data storage",
        "C": "Network communication",
        "D": "Graphics rendering"
        },
        "correct": "A"
    },
    {
        "question": "In computer architecture, what is the purpose of the system bus? (chương 1)",
        "options": {
        "A": "Facilitating communication between CPU and memory",
        "B": "Managing power distribution",
        "C": "Controlling the display resolution",
        "D": "Connecting the CPU to external devices"
        },
        "correct": "A"
    },
    {
        "question": "What does the term \"pipeline hazard\" refer to in computer architecture? (chương 1)",
        "options": {
        "A": "A malfunction in the CPU cooling system",
        "B": "A security vulnerability in software",
        "C": "A network connectivity issue",
        "D": "A delay in instruction execution due to resource conflicts"
        },
        "correct": "D"
    },
    {
        "question": "Which storage device provides fast access to data but is volatile and loses its content when power is lost? (chương 1)",
        "options": {
        "A": "RAM (Random Access Memory)",
        "B": "Hard disk drive (HDD)",
        "C": "Magnetic tape",
        "D": "Solid-state drive (SSD)"
        },
        "correct": "A"
    },
    {
        "question": "Which storage technology uses magnetic fields to store data on rotating disks? (chương 1)",
        "options": {
        "A": "Flash memory",
        "B": "Hard disk drive (HDD)",
        "C": "Solid-state drive (SSD)",
        "D": "Optical disc"
        },
        "correct": "B"
    },
    {
        "question": "Which memory type retains its data even when the power is turned off? (chương 1)",
        "options": {
        "A": "Virtual memory",
        "B": "RAM",
        "C": "ROM",
        "D": "Cache memory"
        },
        "correct": "C"
    },
// p2
    {
        "question": "MFC stands for ___________ (chương 1)",
        "options": {
        "A": "Memory Find Command",
        "B": "Memory Function Complete",
        "C": "Memory Format Caches",
        "D": "Mass Format Command"
        },
        "correct": "B"
    },
    {
        "question": "______ are numbers and encoded characters, generally used as operands. (chương 1)",
        "options": {
        "A": "Data",
        "B": "Stored Values",
        "C": "Information",
        "D": "Input"
        },
        "correct": "A"
    },
    {
        "question": "The ______ format is usually used to store data. (chương 1)",
        "options": {
        "A": "Decimal",
        "B": "Octal",
        "C": "BCD",
        "D": "Hexadecimal"
        },
        "correct": "C"
    },
    {
        "question": "The ALU makes use of _______ to store the intermediate results. (chương 1)",
        "options": {
        "A": "Heap",
        "B": "Registers",
        "C": "Accumulators",
        "D": "Stack"
        },
        "correct": "C"
    },
    {
        "question": "The 8-bit encoding format used to store data in a computer is ______ (chương 1)",
        "options": {
        "A": "ANCI",
        "B": "USCII",
        "C": "EBCDIC",
        "D": "ASCII"
        },
        "correct": "C"
    },
    {
        "question": "The small extremely fast, RAM’s are called as _______ (chương 1)",
        "options": {
        "A": "Heaps",
        "B": "Accumulators",
        "C": "Stacks",
        "D": "Cache"
        },
        "correct": "D"
    },
    {
        "question": "The time delay between two successive initiations of memory operation _______ (chương 1)",
        "options": {
        "A": "Memory cycle time",
        "B": "Memory access time",
        "C": "Instruction delay",
        "D": "Memory search time"
        },
        "correct": "A"
    },
    {
        "question": "The control unit controls other units by generating ___________ (chương 1)",
        "options": {
        "A": "Command Signals",
        "B": "Transfer signals",
        "C": "Control signals",
        "D": "Timing signals"
        },
        "correct": "D"
    },
    {
        "question": "To reduce the memory access time we generally make use of ______ (chương 1)",
        "options": {
        "A": "Cache’s",
        "B": "SDRAM’s",
        "C": "Heaps",
        "D": "Higher capacity RAM’s"
        },
        "correct": "A"
    },
    {
        "question": "The I/O interface required to connect the I/O device to the bus consists of ______ (chương 1)",
        "options": {
        "A": "Address decoder and registers",
        "B": "Control circuits",
        "C": "Address decoder, registers and Control circuits",
        "D": "Only Control circuits"
        },
        "correct": "C"
    },
    {
        "question": "The Input devices can send information to the processor. (chương 1)",
        "options": {
        "A": "Either of the cases",
        "B": "When the SIN status flag is set",
        "C": "When the data arrives regardless of the SIN flag",
        "D": "Neither of the cases"
        },
        "correct": "B"
    },
    {
        "question": "A source program is usually in _______ (chương 1)",
        "options": {
        "A": "Assembly language",
        "B": "Machine level language",
        "C": "Natural language",
        "D": "High-level language"
        },
        "correct": "D"
    },
    {
        "question": "______ is generally used to increase the apparent size of physical memory. (chương 1)",
        "options": {
        "A": "Hard-disk",
        "B": "Virtual memory",
        "C": "Secondary memory",
        "D": "Disks"
        },
        "correct": "B"
    },
    {
        "question": "Which memory device is generally made of semiconductors? (chương 1)",
        "options": {
        "A": "Cd disk",
        "B": "Floppy disk",
        "C": "RAM",
        "D": "Hard-disk"
        },
        "correct": "C"
    },
    {
        "question": "______ bus structure is usually used to connect I/O devices. (chương 1)",
        "options": {
        "A": "Rambus",
        "B": "Single bus",
        "C": "Multiple bus",
        "D": "Star bus"
        },
        "correct": "B"
    },
    
    {
        "question": "The decoded instruction is stored in ______ (chương 1)",
        "options": {
        "A": "MDR",
        "B": "IR",
        "C": "PC",
        "D": "Registers"
        },
        "correct": "B"
    },
    {
        "question": "Which of the register/s of the processor is/are connected to Memory Bus? (chương 1)",
        "options": {
        "A": "MAR",
        "B": "Both PC and MAR",
        "C": "PC",
        "D": "IR"
        },
        "correct": "A"
    },
    {
        "question": "The instruction -> Add LOCA, R0 does _______ (chương 1)",
        "options": {
        "A": "Adds the value of R0 to the address of LOCA",
        "B": "Adds the value of LOCA to R0 and stores in the temp register",
        "C": "Adds the values of both LOCA and R0 and stores it in R0",
        "D": "Adds the value of LOCA with a value in accumulator and stores it in R0"
        },
        "correct": "C"
    },
    {
        "question": "During the execution of a program which gets initialized first? (chương 1)",
        "options": {
        "A": "IR",
        "B": "PC",
        "C": "MAR",
        "D": "MDR"
        },
        "correct": "B"
    },
    {
        "question": "Which registers can interact with the secondary storage? (chương 1)",
        "options": {
        "A": "PC",
        "B": "MAR",
        "C": "R0",
        "D": "IR"
        },
        "correct": "B"
    },
    {
        "question": "_______ is used to store data in registers. (chương 1)",
        "options": {
        "A": "None of the mentioned",
        "B": "D flip flop",
        "C": "JK flip flop",
        "D": "RS flip flop"
        },
        "correct": "B"
    },
    {
        "question": "The registers, ALU and the interconnection between them are collectively called as _____ (chương 1)",
        "options": {
        "A": "information path",
        "B": "information trail",
        "C": "process route",
        "D": "data path"
        },
        "correct": "D"
    },
    {
        "question": "ISP stands for _________ (chương 1)",
        "options": {
        "A": "Interchange Standard Protocol",
        "B": "Instruction Set Processor",
        "C": "Information Standard Processing",
        "D": "Interrupt Service Procedure"
        },
        "correct": "B"
    },
    {
        "question": "The internal components of the processor are connected by _______ (chương 1)",
        "options": {
        "A": "Memory bus",
        "B": "Rambus",
        "C": "Processor intra-connectivity circuitry",
        "D": "Processor bus"
        },
        "correct": "D"
    },
    {
        "question": "______ is used to choose between incrementing the PC or performing ALU operations. (chương 1)",
        "options": {
        "A": "None of the mentioned",
        "B": "Conditional codes",
        "C": "Multiplexer",
        "D": "Control unit"
        },
        "correct": "C"
    },
//p3
    {
        "question": "The decoded instruction is stored in ______ (chương 1)",
        "options": {
        "A": "MDR",
        "B": "IR",
        "C": "PC",
        "D": "Registers"
        },
        "correct": "B"
    },
    {
        "question": "Which of the register/s of the processor is/are connected to Memory Bus? (chương 1)",
        "options": {
        "A": "MAR",
        "B": "Both PC and MAR",
        "C": "PC",
        "D": "IR"
        },
        "correct": "A"
    },
    {
        "question": "The instruction -> Add LOCA, R0 does _______ (chương 1)",
        "options": {
        "A": "Adds the value of R0 to the address of LOCA",
        "B": "Adds the value of LOCA to R0 and stores in the temp register",
        "C": "Adds the values of both LOCA and R0 and stores it in R0",
        "D": "Adds the value of LOCA with a value in accumulator and stores it in R0"
        },
        "correct": "C"
    },
    {
        "question": "During the execution of a program which gets initialized first? (chương 1)",
        "options": {
        "A": "IR",
        "B": "PC",
        "C": "MAR",
        "D": "MDR"
        },
        "correct": "B"
    },
    {
        "question": "Which registers can interact with the secondary storage? (chương 1)",
        "options": {
        "A": "PC",
        "B": "MAR",
        "C": "R0",
        "D": "IR"
        },
        "correct": "B"
    },
    {
        "question": "_______ is used to store data in registers. (chương 1)",
        "options": {
        "A": "None of the mentioned",
        "B": "D flip flop",
        "C": "JK flip flop",
        "D": "RS flip flop"
        },
        "correct": "B"
    },
    {
        "question": "The registers, ALU and the interconnection between them are collectively called as _____ (chương 1)",
        "options": {
        "A": "information path",
        "B": "information trail",
        "C": "process route",
        "D": "data path"
        },
        "correct": "D"
    },
    {
        "question": "ISP stands for _________ (chương 1)",
        "options": {
        "A": "Interchange Standard Protocol",
        "B": "Instruction Set Processor",
        "C": "Information Standard Processing",
        "D": "Interrupt Service Procedure"
        },
        "correct": "B"
    },
    {
        "question": "The internal components of the processor are connected by _______ (chương 1)",
        "options": {
        "A": "Memory bus",
        "B": "Rambus",
        "C": "Processor intra-connectivity circuitry",
        "D": "Processor bus"
        },
        "correct": "D"
    },
    {
        "question": "______ is used to choose between incrementing the PC or performing ALU operations. (chương 1)",
        "options": {
        "A": "None of the mentioned",
        "B": "Conditional codes",
        "C": "Multiplexer",
        "D": "Control unit"
        },
        "correct": "C"
    },
// p4
    {
        "question": "IBM developed a bus standard for their line of computers ‘PC AT’ called _____ (chương 1)",
        "options": {
        "A": "IB bus",
        "B": "None of the mentioned",
        "C": "M-bus",
        "D": "ISA"
        },
        "correct": "D"
    },
    {
        "question": "In multiple Bus organisation, the registers are collectively placed and referred as ______ (chương 1)",
        "options": {
        "A": "Map registers",
        "B": "Set registers",
        "C": "Register Block",
        "D": "Register file"
        },
        "correct": "D"
    },
    {
        "question": "_____ register Connected to the Processor bus is a single-way transfer capable. (chương 1)",
        "options": {
        "A": "PC",
        "B": "Z",
        "C": "IR",
        "D": "Temp"
        },
        "correct": "B"
    },
    {
        "question": "______ are used to overcome the difference in data transfer speeds of various devices. (chương 1)",
        "options": {
        "A": "Bridge circuits",
        "B": "Speed enhancing circuitory",
        "C": "Buffer registers",
        "D": "Multiple Buses"
        },
        "correct": "C"
    },
    {
        "question": "To extend the connectivity of the processor bus we use ________ (chương 1)",
        "options": {
        "A": "Multiple bus",
        "B": "PCI bus",
        "C": "Controllers",
        "D": "SCSI bus"
        },
        "correct": "B"
    },
    {
        "question": "The bus used to connect the monitor to the CPU is ______ (chương 1)",
        "options": {
        "A": "Rambus",
        "B": "SCSI bus",
        "C": "PCI bus",
        "D": "Memory bus"
        },
        "correct": "B"
    },
    {
        "question": "ANSI stands for __________ (chương 1)",
        "options": {
        "A": "American National Standards Institute",
        "B": "American Network Standard Interfacing",
        "C": "American National Standard Interface",
        "D": "American Network Security Interrupt"
        },
        "correct": "A"
    },
    {
        "question": "The main advantage of multiple bus organisation over a single bus is _____ (chương 1)",
        "options": {
        "A": "Increase in size of the registers",
        "B": "Better Connectivity",
        "C": "None of the mentioned",
        "D": "Reduction in the number of cycles for execution"
        },
        "correct": "D"
    },
    {
        "question": "The main virtue for using single Bus structure is ____________ (chương 1)",
        "options": {
        "A": "None of the mentioned",
        "B": "Fast data transfers",
        "C": "Cost effective connectivity and ease of attaching peripheral devices",
        "D": "Cost effective connectivity and speed"
        },
        "correct": "C"
    },
    {
        "question": "The ISA standard Buses are used to connect ___________ (chương 1)",
        "options": {
        "A": "CD/DVD drives and Processor",
        "B": "RAM and processor",
        "C": "GPU and processor",
        "D": "Harddisk and Processor"
        },
        "correct": "D"
    },
// P5
    {
        "question": "A processor performing fetch or decoding of different instruction during the execution of another instruction is called ______ (chương 1)",
        "options": {
        "A": "Parallel Computation",
        "B": "Pipe-lining",
        "C": "None of the mentioned",
        "D": "Super-scaling"
        },
        "correct": "B"
    },
    {
        "question": "The average number of steps taken to execute the set of instructions can be made to be less than one by following _______ (chương 1)",
        "options": {
        "A": "Pipe-lining",
        "B": "ISA",
        "C": "Super-scaling",
        "D": "Sequential"
        },
        "correct": "C"
    },
    {
        "question": "CISC stands for _______ (chương 1)",
        "options": {
        "A": "Computer Integrated Sequential Compiler",
        "B": "Complex Instruction Set Computer",
        "C": "Complex Instruction Sequential Compilation",
        "D": "Complete Instruction Sequential Compilation"
        },
        "correct": "B"
    },
    {
        "question": "If a processor clock is rated as 1250 million cycles per second, then its clock period is ________ (chương 1)",
        "options": {
        "A": "1.6 * 10-9 sec",
        "B": "1.25 * 10-10 sec",
        "C": "8 * 10-10 sec",
        "D": "1.9 * 10-10 sec"
        },
        "correct": "C"
    },
    {
        "question": "When Performing a looping operation, the instruction gets stored in the ______ (chương 1)",
        "options": {
        "A": "Registers",
        "B": "System Heap",
        "C": "Cache",
        "D": "System stack"
        },
        "correct": "C"
    },
    {
        "question": "The clock rate of the processor can be improved by _________ (chương 1)",
        "options": {
        "A": "Improving the IC technology of the logic circuits",
        "B": "All of the mentioned",
        "C": "Reducing the amount of processing done in one step",
        "D": "By using the overclocking method"
        },
        "correct": "B"
    },
    {
        "question": "For a given FINITE number of instructions to be executed, which architecture of the processor provides for a faster execution? (chương 1)",
        "options": {
        "A": "Super-scalar",
        "B": "ANSA",
        "C": "ISA",
        "D": "All of the mentioned"
        },
        "correct": "A"
    },
    {
        "question": "The ultimate goal of a compiler is to ________ (chương 1)",
        "options": {
        "A": "Be able to detect even the smallest of errors",
        "B": "Be versatile",
        "C": "Reduce the clock cycles for a programming task",
        "D": "Reduce the size of the object code"
        },
        "correct": "C"
    },
    {
        "question": "An optimizing Compiler does _________ (chương 1)",
        "options": {
        "A": "Takes advantage of the type of processor and reduces its process time",
        "B": "Better compilation of the given piece of code",
        "C": "Does better memory management",
        "D": "None of the mentioned"
        },
        "correct": "A"
    },
    {
        "question": "As of 2000, the reference system to find the SPEC rating are built with _____ Processor. (chương 1)",
        "options": {
        "A": "Intel Atom SParc 300Mhz",
        "B": "Ultra SPARC -IIi 300MHZ",
        "C": "ASUS A series 450 Mhz",
        "D": "Amd Neutrino series"
        },
        "correct": "B"
    },
    {
        "question": "SPEC stands for _______ (chương 1)",
        "options": {
        "A": "Standard Processing Enhancement Corporation",
        "B": "System Processing Enhancing Code",
        "C": "System Performance Evaluation Corporation",
        "D": "Standard Performance Evaluation Code"
        },
        "correct": "C"
    },
    {
        "question": "Two processors A and B have clock frequencies of 700 Mhz and 900 Mhz respectively. Suppose A can execute an instruction with an average of 3 steps and B can execute with an average of 5 steps. For the execution of the same instruction which processor is faster? (chương 1)",
        "options": {
        "A": "B",
        "B": "Insufficient information",
        "C": "Both take the same time",
        "D": "A"
        },
        "correct": "D"
    },
    {
        "question": "As of 2000, the reference system to find the performance of a system is _____ (chương 1)",
        "options": {
        "A": "SUN II",
        "B": "Ultra SPARC 10",
        "C": "None of the mentioned",
        "D": "SUN SPARC"
        },
        "correct": "B"
    },
    {
        "question": "If the instruction, Add R1, R2, R3 is executed in a system that is pipe-lined, then the value of S is (Where S is a term of the Basic performance equation)? (chương 1)",
        "options": {
        "A": "6",
        "B": "3",
        "C": "~2",
        "D": "~1"
        },
        "correct": "D"
    },
    {
        "question": "During the execution of the instructions, a copy of the instructions is placed in the ______ (chương 1)",
        "options": {
        "A": "Cache",
        "B": "Register",
        "C": "RAM",
        "D": "System heap"
        },
        "correct": "A"
    },
// CHUONG 2
//p1p1
    {
        "question": "What is the primary function of the control unit in a CPU? (chương 2)",
        "options": {
        "A": "Handling network communication",
        "B": "Executing arithmetic operations",
        "C": "Coordinating and controlling CPU activities",
        "D": "Managing memory storage"
        },
        "correct": "C"
    },
    {
        "question": "In the context of the CPU, what is a register? (chương 2)",
        "options": {
        "A": "Output devices",
        "B": "Temporary storage locations within the CPU",
        "C": "External storage devices",
        "D": "Secondary storage units"
        },
        "correct": "B"
    },
    {
        "question": "Which unit within the CPU is responsible for executing arithmetic and logical operations? (chương 2)",
        "options": {
        "A": "Register file",
        "B": "Cache memory",
        "C": "ALU (Arithmetic Logic Unit)",
        "D": "Control Unit"
        },
        "correct": "C"
    },
    {
        "question": "What is the purpose of the Arithmetic Logic Unit (ALU) in the CPU? (chương 2)",
        "options": {
        "A": "Handling network communication",
        "B": "Managing memory storage",
        "C": "Executing arithmetic and logic operations",
        "D": "Controlling input/output devices"
        },
        "correct": "C"
    },
    {
        "question": "What does CPU stand for in computer architecture? (chương 2)",
        "options": {
        "A": "Central Processing Unit",
        "B": "Computer Peripheral Unit",
        "C": "Control and Processing Unit",
        "D": "Central Peripheral Unit"
        },
        "correct": "A"
    },
    {
        "question": "Which component is responsible for coordinating and controlling the activities of the CPU? (chương 2)",
        "options": {
        "A": "Register file",
        "B": "ALU (Arithmetic Logic Unit)",
        "C": "Cache memory",
        "D": "Control Unit"
        },
        "correct": "D"
    },
    {
        "question": "How does the CPU use the instruction register during the fetch-decode-execute cycle? (chương 2)",
        "options": {
        "A": "Controlling input/output devices",
        "B": "Managing memory storage",
        "C": "Storing the current instruction being executed",
        "D": "Handling network communication"
        },
        "correct": "C"
    },
    {
        "question": "Which component of the CPU is responsible for fetching instructions from memory? (chương 2)",
        "options": {
        "A": "Cache memory",
        "B": "Control Unit",
        "C": "Register file",
        "D": "ALU (Arithmetic Logic Unit)"
        },
        "correct": "B"
    },
    {
        "question": "What is the purpose of the cache memory in a CPU? (chương 2)",
        "options": {
        "A": "Temporarily storing frequently used data for quick access",
        "B": "Storing the operating system",
        "C": "Providing long-term storage",
        "D": "Managing input/output operations"
        },
        "correct": "A"
    },
    {
        "question": "Which type of memory is non-volatile and retains its content even when the power is turned off? (chương 2)",
        "options": {
        "A": "Virtual memory",
        "B": "Cache memory",
        "C": "RAM (Random Access Memory)",
        "D": "ROM (Read-Only Memory)"
        },
        "correct": "D"
    },
    {
        "question": "What is the significance of the fetch-decode-execute cycle in the CPU? (chương 2)",
        "options": {
        "A": "Fetching, decoding, and executing instructions in a loop",
        "B": "Executing instructions in a sequential manner",
        "C": "Managing input/output operations",
        "D": "Controlling the flow of data within the CPU"
        },
        "correct": "A"
    },
    {
        "question": "What is the purpose of the clock signal in a CPU? (chương 2)",
        "options": {
        "A": "Synchronizing and regulating the execution of instructions",
        "B": "Controlling the flow of data within the CPU",
        "C": "Executing arithmetic and logic operations",
        "D": "Managing memory access"
        },
        "correct": "A"
    },
    {
        "question": "Which part of the CPU is responsible for temporarily storing data during processing? (chương 2)",
        "options": {
        "A": "Cache memory",
        "B": "Register file",
        "C": "Control Unit",
        "D": "ALU (Arithmetic Logic Unit)"
        },
        "correct": "A"
    },
    {
        "question": "What role does the accumulator play in the CPU? (chương 2)",
        "options": {
        "A": "Storing the result of arithmetic operations",
        "B": "Managing memory storage",
        "C": "Controlling input/output devices",
        "D": "Handling network communication"
        },
        "correct": "A"
    },
    {
        "question": "Which type of memory is directly connected to the CPU and stores frequently used data? (chương 2)",
        "options": {
        "A": "Hard disk",
        "B": "ROM (Read-Only Memory)",
        "C": "Cache memory",
        "D": "RAM (Random Access Memory)"
        },
        "correct": "C"
    },
    {
        "question": "Which type of memory contains the BIOS (Basic Input/Output System) in a computer system? (chương 2)",
        "options": {
        "A": "Cache memory",
        "B": "RAM (Random Access Memory)",
        "C": "ROM (Read-Only Memory)",
        "D": "Virtual memory"
        },
        "correct": "C"
    },
    {
        "question": "What does the term \"clock speed\" refer to in the context of the CPU? (chương 2)",
        "options": {
        "A": "The speed at which data is transferred between the CPU and memory",
        "B": "The size of the cache memory",
        "C": "The number of cores in a processor",
        "D": "The frequency at which the CPU executes instructions"
        },
        "correct": "D"
    },
    {
        "question": "What is the function of the instruction register in the CPU? (chương 2)",
        "options": {
        "A": "Handling network communication",
        "B": "Controlling input/output devices",
        "C": "Managing memory storage",
        "D": "Storing the current instruction being executed"
        },
        "correct": "D"
    },
    {
        "question": "What is the purpose of the data bus in the CPU? (chương 2)",
        "options": {
        "A": "Managing power distribution",
        "B": "Connecting the CPU to external devices",
        "C": "Facilitating communication between CPU and memory",
        "D": "Controlling the display resolution"
        },
        "correct": "C"
    },
    {
        "question": "In a CPU, what is the role of the program counter (PC)? (chương 2)",
        "options": {
        "A": "Managing memory storage",
        "B": "Handling network communication",
        "C": "Storing the current instruction being executed",
        "D": "Controlling input/output devices"
        },
        "correct": "C"
    },

//p2
    {
        "question": "In a normal n-bit adder, to find out if an overflow as occurred we make use of ________ (chương 2)",
        "options": {
        "A": "Nor gate",
        "B": "Nand gate",
        "C": "And gate",
        "D": "Xor gate"
        },
        "correct": "D"
    },
    {
        "question": "For the addition of large integers, most of the systems make use of ______ (chương 2)",
        "options": {
        "A": "Full adders",
        "B": "Fast adders",
        "C": "None of the mentioned",
        "D": "Carry look-ahead adders"
        },
        "correct": "D"
    },
    {
        "question": "When we perform subtraction on -7 and 1 the answer in 2's complement form is _________ (chương 2)",
        "options": {
        "A": "0110",
        "B": "1110",
        "C": "1010",
        "D": "1000"
        },
        "correct": "D"
    },
    {
        "question": "Which method/s of representation of numbers occupies a large amount of memory than others? (chương 2)",
        "options": {
        "A": "1's & 2's compliment",
        "B": "1's complement",
        "C": "2's complement",
        "D": "Sign-magnitude"
        },
        "correct": "D"
    },
    {
        "question": "When we perform subtraction on -7 and -5 the answer in 2's complement form is ________ (chương 2)",
        "options": {
        "A": "1110",
        "B": "1010",
        "C": "0010",
        "D": "11110"
        },
        "correct": "A"
    },
    {
        "question": "Which representation is most efficient to perform arithmetic operations on the numbers? (chương 2)",
        "options": {
        "A": "None of the mentioned",
        "B": "2'S complement",
        "C": "Sign-magnitude",
        "D": "1's complement"
        },
        "correct": "B"
    },
    {
        "question": "When we subtract -3 from 2 , the answer in 2's complement form is _________ (chương 2)",
        "options": {
        "A": "1101",
        "B": "0001",
        "C": "0101",
        "D": "1001"
        },
        "correct": "C"
    },
    {
        "question": "The most efficient method followed by computers to multiply two unsigned numbers is _______ (chương 2)",
        "options": {
        "A": "Booth algorithm",
        "B": "Bit pair recording of multipliers",
        "C": "Non restoring algorithm",
        "D": "Restoring algorithm"
        },
        "correct": "B"
    },
    {
        "question": "In the implementation of a Multiplier circuit in the system we make use of _______ (chương 2)",
        "options": {
        "A": "Counter",
        "B": "Flip flop",
        "C": "Push down stack",
        "D": "Shift register"
        },
        "correct": "D"
    },
    {
        "question": "The Flag 'V' is set to 1 indicates that _____________ (chương 2)",
        "options": {
        "A": "The operation is validated",
        "B": "None of the mentioned",
        "C": "The operation has resulted in an overflow",
        "D": "The operation is valid"
        },
        "correct": "C"
    },
    {
        "question": "The processor keeps track of the results of its operations using flags called ________ (chương 2)",
        "options": {
        "A": "Conditional code flags",
        "B": "Test output flags",
        "C": "None of the mentioned",
        "D": "Type flags"
        },
        "correct": "A"
    },
    {
        "question": "In some pipelined systems, a different instruction is used to add to numbers which can affect the flags upon execution. That instruction is _______ (chương 2)",
        "options": {
        "A": "AddCC",
        "B": "SumSetCC",
        "C": "AddSetCC",
        "D": "Add++"
        },
        "correct": "C"
    },
    {
        "question": "When 1101 is used to divide 100010010 the remainder is ______ (chương 2)",
        "options": {
        "A": "1",
        "B": "11",
        "C": "0",
        "D": "101"
        },
        "correct": "A"
    },
    {
        "question": "The register used to store the flags is called as _________ (chương 2)",
        "options": {
        "A": "Log register",
        "B": "Test register",
        "C": "Flag register",
        "D": "Status register"
        },
        "correct": "D"
    },
    {
        "question": "Which method of representation has two representations for '0'? (chương 2)",
        "options": {
        "A": "Sign-magnitude",
        "B": "None of the mentioned",
        "C": "1's complement",
        "D": "2's complement"
        },
        "correct": "A"
    },
//p3
    {
        "question": "In pipeline processing, what is meant by the term \"pipeline bubble\"? (chương 2)",
        "options": {
        "A": "A wasted clock cycle due to a stalled pipeline",
        "B": "A clock speed bottleneck",
        "C": "A structural hazard",
        "D": "A delay in instruction fetching"
        },
        "correct": "A"
    },
    {
        "question": "In a CPU pipeline, what is the purpose of the instruction fetch stage? (chương 2)",
        "options": {
        "A": "Store results in registers",
        "B": "Fetch instructions from memory",
        "C": "Execute arithmetic operations",
        "D": "Decode instructions"
        },
        "correct": "B"
    },
    {
        "question": "What is the primary advantage of pipelining in terms of instruction throughput? (chương 2)",
        "options": {
        "A": "Overlapping the execution of multiple instructions",
        "B": "Eliminating the need for cache memory",
        "C": "Reducing the number of pipeline stages",
        "D": "Increasing the clock speed"
        },
        "correct": "A"
    },
    {
        "question": "What is the primary challenge associated with branch instructions in a pipeline? (chương 2)",
        "options": {
        "A": "Increasing the number of registers",
        "B": "Control hazards and pipeline stalls",
        "C": "Reducing clock speed",
        "D": "Eliminating data hazards"
        },
        "correct": "B"
    },
    {
        "question": "What is the primary goal of pipeline technique in CPU architecture? (chương 2)",
        "options": {
        "A": "Increasing instruction execution throughput",
        "B": "Reducing clock speed",
        "C": "Minimizing the number of registers",
        "D": "Eliminating cache memory"
        },
        "correct": "A"
    },
    {
        "question": "What term describes a hazard in a pipeline, where the next instruction depends on the result of the previous instruction? (chương 2)",
        "options": {
        "A": "Data hazard",
        "B": "Pipeline stall",
        "C": "Control hazard",
        "D": "Instruction fetch"
        },
        "correct": "A"
    },
    {
        "question": "What is the role of the hazard detection unit in a pipeline architecture? (chương 2)",
        "options": {
        "A": "Identifying and handling hazards",
        "B": "Eliminating cache memory",
        "C": "Controlling the clock speed",
        "D": "Preventing structural hazards"
        },
        "correct": "A"
    },
    {
        "question": "What is the purpose of the instruction issue stage in a CPU pipeline? (chương 2)",
        "options": {
        "A": "Storing results in registers",
        "B": "Decoding instructions",
        "C": "Fetching instructions from memory",
        "D": "Initiating the execution of instructions"
        },
        "correct": "D"
    },
    {
        "question": "What type of hazard occurs when an instruction is not ready to proceed to the next stage of the pipeline? (chương 2)",
        "options": {
        "A": "Pipeline stall",
        "B": "Data hazard",
        "C": "Structural hazard",
        "D": "Control hazard"
        },
        "correct": "A"
    },
    {
        "question": "In a CPU pipeline, what is the term for the time it takes to complete a single instruction from start to finish? (chương 2)",
        "options": {
        "A": "Clock cycle",
        "B": "Latency",
        "C": "Throughput",
        "D": "Pipeline bubble"
        },
        "correct": "B"
    },
    {
        "question": "What is a drawback of pipeline processing in terms of potential hazards? (chương 2)",
        "options": {
        "A": "Pipeline stalls and hazards",
        "B": "Elimination of cache memory",
        "C": "Increased clock speed",
        "D": "Reduced instruction set"
        },
        "correct": "A"
    },
    {
        "question": "In a pipeline, what is a structural hazard? (chương 2)",
        "options": {
        "A": "A delay in instruction fetching",
        "B": "A resource conflict preventing simultaneous execution",
        "C": "A delay due to data dependencies",
        "D": "A pipeline stall due to a control hazard"
        },
        "correct": "B"
    },
    {
        "question": "How does pipelining contribute to overall CPU efficiency? (chương 2)",
        "options": {
        "A": "By reducing the number of registers",
        "B": "By increasing clock speed",
        "C": "By overlapping the execution of multiple instructions",
        "D": "By eliminating cache memory"
        },
        "correct": "C"
    },
    {
        "question": "Which stage of the pipeline is responsible for decoding the instruction and determining the operation to be performed? (chương 2)",
        "options": {
        "A": "Write-back",
        "B": "Decode",
        "C": "Execute",
        "D": "Fetch"
        },
        "correct": "B"
    },
    {
        "question": "How does the use of forwarding (data hazards resolution) contribute to pipeline efficiency? (chương 2)",
        "options": {
        "A": "Eliminating the need for cache memory",
        "B": "Reducing clock speed",
        "C": "Minimizing stalls by forwarding data directly between pipeline stages",
        "D": "Increasing the number of pipeline stages"
        },
        "correct": "C"
    },
    {
        "question": "In a CPU pipeline, what is the term for an instruction that is being processed in a stage of the pipeline? (chương 2)",
        "options": {
        "A": "In-flight instruction",
        "B": "Fetch instruction",
        "C": "Stalled instruction",
        "D": "Pipeline hazard"
        },
        "correct": "A"
    },
    {
        "question": "How does pipelining impact the overall throughput of a CPU? (chương 2)",
        "options": {
        "A": "Increases the clock speed",
        "B": "Allows multiple instructions to be processed simultaneously",
        "C": "Reduces instruction execution throughput",
        "D": "Eliminates the need for cache memory"
        },
        "correct": "B"
    },
    {
        "question": "How does pipeline parallelism improve CPU performance? (chương 2)",
        "options": {
        "A": "By reducing the number of pipeline stages",
        "B": "By allowing multiple instructions to be processed simultaneously",
        "C": "By increasing the clock speed",
        "D": "By eliminating cache memory"
        },
        "correct": "B"
    },
    {
        "question": "What is the purpose of the write-back stage in a CPU pipeline? (chương 2)",
        "options": {
        "A": "Executing arithmetic operations",
        "B": "Storing results in registers",
        "C": "Decoding instructions",
        "D": "Fetching instructions from memory"
        },
        "correct": "B"
    },
    {
        "question": "What is the purpose of the pipeline stage known as \"execute\"? (chương 2)",
        "options": {
        "A": "Decoding instructions",
        "B": "Fetching instructions from memory",
        "C": "Storing results in registers",
        "D": "Performing arithmetic and logic operations"
        },
        "correct": "D"
    },
//P4
    {
        "question": "The Instruction fetch phase ends with _________ (chương 2)",
        "options": {
        "A": "Decoding the data in MDR and placing it in IR",
        "B": "Placing the address of the data into MAR",
        "C": "Placing the data from the address in MAR into MDR",
        "D": "Completing the execution of the data and placing its storage address into MAR"
        },
        "correct": "A"
    },
    {
        "question": "The two phases of executing an instruction are __________ (chương 2)",
        "options": {
        "A": "Instruction execution and storage",
        "B": "Instruction fetch and Instruction processing",
        "C": "Instruction decoding and storage",
        "D": "Instruction fetch and instruction execution"
        },
        "correct": "D"
    },
    {
        "question": "When using Branching, the usual sequencing of the PC is altered. A new instruction is loaded which is called as ______ (chương 2)",
        "options": {
        "A": "Loop target",
        "B": "Forward target",
        "C": "Branch target",
        "D": "Jump instruction"
        },
        "correct": "C"
    },
    {
        "question": "The condition flag Z is set to 1 to indicate _______ (chương 2)",
        "options": {
        "A": "The result is zero",
        "B": "The operation requires an interrupt call",
        "C": "There is no empty register available",
        "D": "The operation has resulted in an error"
        },
        "correct": "A"
    },
    {
        "question": "In a system, which has 32 registers the register id is __________ long. (chương 2)",
        "options": {
        "A": "16 bit",
        "B": "8 bits",
        "C": "5 bits",
        "D": "6 bits"
        },
        "correct": "C"
    },
    {
        "question": "The instruction, Add R1,R2,R3 in RTN is _______ (chương 2)",
        "options": {
        "A": "R3=[R1]+[R2]",
        "B": "R3<-[R1]+[R2]+[R3]",
        "C": "R3=R1+R2+R3",
        "D": "R3<-[R1]+[R2]"
        },
        "correct": "D"
    },
    {
        "question": "The instruction, Add Loc,R1 in RTN is _______ (chương 2)",
        "options": {
        "A": "AddSetCC Loc+R1",
        "B": "Not possible to write in RTN",
        "C": "R1=Loc+R1",
        "D": "R1<-[Loc]+[R1]"
        },
        "correct": "D"
    },
    {
        "question": "While using the iterative construct (Branching) in execution _____________ instruction is used to check the condition. (chương 2)",
        "options": {
        "A": "TestCondn",
        "B": "None of the mentioned",
        "C": "TestAndSet",
        "D": "Branch"
        },
        "correct": "D"
    },
    {
        "question": "RTN stands for ___________ (chương 2)",
        "options": {
        "A": "Regular Transmission Notation",
        "B": "Regular Transfer Notation",
        "C": "Register Transfer Notation",
        "D": "Register Transmission Notation"
        },
        "correct": "C"
    },
    {
        "question": "Can you perform an addition on three operands simultaneously in ALN using Add instruction? (chương 2)",
        "options": {
        "A": "Not permitted",
        "B": "Yes",
        "C": "None of the mentioned",
        "D": "Not possible using Add, we’ve to use AddSetCC"
        },
        "correct": "A"
    },
// CHUONG 3
//p1
    {
        "question": "What is a cache hit in the context of cache memory? (chương 3)",
        "options": {
        "A": "The cache is disabled",
        "B": "The requested data is in the cache",
        "C": "The cache is empty",
        "D": "The requested data is not in the cache"
        },
        "correct": "B"
    },
    {
        "question": "How does the write-through policy in cache memory differ from the write-back policy? (chương 3)",
        "options": {
        "A": "Write-back updates main memory only when cache is full",
        "B": "Write-through writes data to main memory immediately",
        "C": "Write-back writes data to main memory immediately",
        "D": "Write-through updates main memory only when cache is full"
        },
        "correct": "B"
    },
    {
        "question": "Which cache replacement policy replaces the cache line that has been unused for the longest time? (chương 3)",
        "options": {
        "A": "Least Recently Used (LRU)",
        "B": "First-In-First-Out (FIFO)",
        "C": "Most Recently Used (MRU)",
        "D": "Random Replacement"
        },
        "correct": "A"
    },
    {
        "question": "What is the relationship between cache size and access speed? (chương 3)",
        "options": {
        "A": "Cache size determines clock speed",
        "B": "Cache size does not affect access speed",
        "C": "Larger cache size results in faster access",
        "D": "Smaller cache size results in faster access"
        },
        "correct": "C"
    },
    {
        "question": "How does cache coherence ensure data consistency in a multi-core system? (chương 3)",
        "options": {
        "A": "By controlling clock speed",
        "B": "By preventing cache hits",
        "C": "By synchronizing the content of different caches",
        "D": "By increasing cache size"
        },
        "correct": "C"
    },
    {
        "question": "In a computer system, what is the purpose of the cache controller? (chương 3)",
        "options": {
        "A": "Coordinating cache access",
        "B": "Controlling input/output devices",
        "C": "Managing long-term storage",
        "D": "Executing arithmetic operations"
        },
        "correct": "A"
    },
    {
        "question": "What is the primary role of the tag in a cache memory address? (chương 3)",
        "options": {
        "A": "Determining cache hit or miss",
        "B": "Temporarily storing data",
        "C": "Managing input/output operations",
        "D": "Controlling clock speed"
        },
        "correct": "A"
    },
    {
        "question": "What is the benefit of having a multi-level cache hierarchy (e.g., L1, L2, L3)? (chương 3)",
        "options": {
        "A": "Decreased overall cache size",
        "B": "Elimination of cache hits",
        "C": "Increased overall cache size",
        "D": "Slower access times"
        },
        "correct": "C"
    },
    {
        "question": "In cache memory, what is the purpose of the Least Recently Used (LRU) algorithm? (chương 3)",
        "options": {
        "A": "Managing long-term storage",
        "B": "Controlling clock speed",
        "C": "Temporarily storing frequently used data",
        "D": "Determining cache hit or miss"
        },
        "correct": "D"
    },
    {
        "question": "What is the primary disadvantage of a direct-mapped cache? (chương 3)",
        "options": {
        "A": "Larger cache size",
        "B": "Limited associativity",
        "C": "Slower access times",
        "D": "Higher complexity"
        },
        "correct": "B"
    },
    {
        "question": "In cache memory, what is the purpose of the set-associative mapping? (chương 3)",
        "options": {
        "A": "Determining cache hit or miss",
        "B": "Controlling the clock speed",
        "C": "Coordinating cache access",
        "D": "Organizing cache lines into sets for associativity"
        },
        "correct": "D"
    },
    {
        "question": "What is the term for a situation where the requested data is not found in the cache? (chương 3)",
        "options": {
        "A": "Cache controller",
        "B": "Cache line",
        "C": "Cache hit",
        "D": "Cache miss"
        },
        "correct": "D"
    },
    {
        "question": "Which type of cache is located on the CPU chip itself? (chương 3)",
        "options": {
        "A": "Level 3 (L3) cache",
        "B": "Level 2 (L2) cache",
        "C": "Level 1 (L1) cache",
        "D": "Virtual cache"
        },
        "correct": "C"
    },
    {
        "question": "What is the purpose of prefetching in cache memory? (chương 3)",
        "options": {
        "A": "Controlling the clock speed",
        "B": "Eliminating cache misses",
        "C": "Anticipating and loading data into the cache before it is requested",
        "D": "Temporarily storing frequently used data"
        },
        "correct": "C"
    },
    {
        "question": "What is the primary purpose of cache memory in a computer system? (chương 3)",
        "options": {
        "A": "Storing long-term data",
        "B": "Providing high-speed access to frequently used data",
        "C": "Controlling the clock speed",
        "D": "Managing input/output operations"
        },
        "correct": "B"
    },
    {
        "question": "What is the purpose of a cache line in cache memory? (chương 3)",
        "options": {
        "A": "Coordinating cache access",
        "B": "Temporarily storing frequently used data",
        "C": "Storing data permanently",
        "D": "Managing input/output operations"
        },
        "correct": "B"
    },
    {
        "question": "What is the purpose of the write-back policy in cache memory? (chương 3)",
        "options": {
        "A": "Writing data to main memory immediately",
        "B": "Updating main memory only when cache is full",
        "C": "Storing data permanently",
        "D": "Temporarily storing frequently used data"
        },
        "correct": "B"
    },
    {
        "question": "How does associativity in cache memory affect its performance? (chương 3)",
        "options": {
        "A": "Higher associativity leads to faster access times",
        "B": "Lower associativity leads to faster access times",
        "C": "Associativity does not impact access times",
        "D": "Associativity determines clock speed"
        },
        "correct": "A"
    },
    {
        "question": "How does cache memory contribute to overall system performance? (chương 3)",
        "options": {
        "A": "By providing fast access to frequently used data",
        "B": "By reducing the clock speed",
        "C": "By increasing the size of main memory",
        "D": "By eliminating the need for registers"
        },
        "correct": "A"
    },
    {
        "question": "What is the impact of cache memory on power consumption in a computer system? (chương 3)",
        "options": {
        "A": "Decreased power consumption",
        "B": "Cache has no effect on power consumption",
        "C": "Power consumption is determined by clock speed",
        "D": "Increased power consumption"
        },
        "correct": "D"
    },
//P2
    {
        "question": "What is the purpose of the write-back policy in cache memory? (chương 3)",
        "options": {
        "A": "Updating main memory only when cache is full",
        "B": "Writing data to main memory immediately",
        "C": "Storing data permanently",
        "D": "Temporarily storing frequently used data"
        },
        "correct": "A"
    },
    {
        "question": "How does associativity in cache memory affect its performance? (chương 3)",
        "options": {
        "A": "Higher associativity leads to faster access times",
        "B": "Lower associativity leads to faster access times",
        "C": "Associativity does not impact access times",
        "D": "Associativity determines clock speed"
        },
        "correct": "A"
    },
    {
        "question": "How does cache memory contribute to overall system performance? (chương 3)",
        "options": {
        "A": "By increasing the size of main memory",
        "B": "By eliminating the need for registers",
        "C": "By reducing the clock speed",
        "D": "By providing fast access to frequently used data"
        },
        "correct": "D"
    },
    {
        "question": "What is the purpose of a cache line in cache memory? (chương 3)",
        "options": {
        "A": "Temporarily storing frequently used data",
        "B": "Storing data permanently",
        "C": "Managing input/output operations",
        "D": "Coordinating cache access"
        },
        "correct": "A"
    },
    {
        "question": "What is the primary role of the tag in a cache memory address? (chương 3)",
        "options": {
        "A": "Controlling clock speed",
        "B": "Temporarily storing data",
        "C": "Determining cache hit or miss",
        "D": "Managing input/output operations"
        },
        "correct": "C"
    },
    {
        "question": "What is the relationship between cache size and access speed? (chương 3)",
        "options": {
        "A": "Cache size determines clock speed",
        "B": "Smaller cache size results in faster access",
        "C": "Cache size does not affect access speed",
        "D": "Larger cache size results in faster access"
        },
        "correct": "D"
    },
    {
        "question": "What is the purpose of prefetching in cache memory? (chương 3)",
        "options": {
        "A": "Eliminating cache misses",
        "B": "Anticipating and loading data into the cache before it is requested",
        "C": "Controlling the clock speed",
        "D": "Temporarily storing frequently used data"
        },
        "correct": "B"
    },
    {
        "question": "How does cache coherence ensure data consistency in a multi-core system? (chương 3)",
        "options": {
        "A": "By preventing cache hits",
        "B": "By synchronizing the content of different caches",
        "C": "By controlling clock speed",
        "D": "By increasing cache size"
        },
        "correct": "B"
    },
    {
        "question": "How does the write-through policy in cache memory differ from the write-back policy? (chương 3)",
        "options": {
        "A": "Write-back writes data to main memory immediately",
        "B": "Write-through updates main memory only when cache is full",
        "C": "Write-through writes data to main memory immediately",
        "D": "Write-back updates main memory only when cache is full"
        },
        "correct": "C"
    },
    {
        "question": "What is a cache hit in the context of cache memory? (chương 3)",
        "options": {
        "A": "The cache is disabled",
        "B": "The requested data is not in the cache",
        "C": "The cache is empty",
        "D": "The requested data is in the cache"
        },
        "correct": "D"
    },
    {
        "question": "In cache memory, what is the purpose of the Least Recently Used (LRU) algorithm? (chương 3)",
        "options": {
        "A": "Managing long-term storage",
        "B": "Temporarily storing frequently used data",
        "C": "Determining cache hit or miss",
        "D": "Controlling clock speed"
        },
        "correct": "C"
    },
    {
        "question": "Which cache replacement policy replaces the cache line that has been unused for the longest time? (chương 3)",
        "options": {
        "A": "First-In-First-Out (FIFO)",
        "B": "Random Replacement",
        "C": "Least Recently Used (LRU)",
        "D": "Most Recently Used (MRU)"
        },
        "correct": "C"
    },
    {
        "question": "What is the impact of cache memory on power consumption in a computer system? (chương 3)",
        "options": {
        "A": "Power consumption is determined by clock speed",
        "B": "Cache has no effect on power consumption",
        "C": "Decreased power consumption",
        "D": "Increased power consumption"
        },
        "correct": "D"
    },
    {
        "question": "What is the term for a situation where the requested data is not found in the cache? (chương 3)",
        "options": {
        "A": "Cache miss",
        "B": "Cache hit",
        "C": "Cache line",
        "D": "Cache controller"
        },
        "correct": "A"
    },
    {
        "question": "What is the primary disadvantage of a direct-mapped cache? (chương 3)",
        "options": {
        "A": "Larger cache size",
        "B": "Slower access times",
        "C": "Limited associativity",
        "D": "Higher complexity"
        },
        "correct": "C"
    },
    {
        "question": "In cache memory, what is the purpose of the set-associative mapping? (chương 3)",
        "options": {
        "A": "Determining cache hit or miss",
        "B": "Organizing cache lines into sets for associativity",
        "C": "Coordinating cache access",
        "D": "Controlling the clock speed"
        },
        "correct": "B"
    },
    {
        "question": "Which type of cache is located on the CPU chip itself? (chương 3)",
        "options": {
        "A": "Level 3 (L3) cache",
        "B": "Level 1 (L1) cache",
        "C": "Level 2 (L2) cache",
        "D": "Virtual cache"
        },
        "correct": "B"
    },
    {
        "question": "What is the primary purpose of cache memory in a computer system? (chương 3)",
        "options": {
        "A": "Managing input/output operations",
        "B": "Controlling the clock speed",
        "C": "Providing high-speed access to frequently used data",
        "D": "Storing long-term data"
        },
        "correct": "C"
    },
    {
        "question": "In a computer system, what is the purpose of the cache controller? (chương 3)",
        "options": {
        "A": "Managing long-term storage",
        "B": "Controlling input/output devices",
        "C": "Executing arithmetic operations",
        "D": "Coordinating cache access"
        },
        "correct": "D"
    },
    {
        "question": "What is the benefit of having a multi-level cache hierarchy (e.g., L1, L2, L3)? (chương 3)",
        "options": {
        "A": "Elimination of cache hits",
        "B": "Decreased overall cache size",
        "C": "Slower access times",
        "D": "Increased overall cache size"
        },
        "correct": "D"
    },
//CHUONG 4
    {
        "question": "The type of memory assignment used in Intel processors is _____ (chương 4)",
        "options": {
        "A": "Medium Endian",
        "B": "Big Endian",
        "C": "None of the mentioned",
        "D": "Little Endian"
        },
        "correct": "D"
    },
    {
        "question": "To get the physical address from the logical address generated by CPU we use ____________ (chương 4)",
        "options": {
        "A": "MAR",
        "B": "MMU",
        "C": "Overlays",
        "D": "TLB"
        },
        "correct": "B"
    },
    {
        "question": "The collection of the above mentioned entities where data is stored is called ______ (chương 4)",
        "options": {
        "A": "Block",
        "B": "Word",
        "C": "Set",
        "D": "Byte"
        },
        "correct": "B"
    },
    {
        "question": "Physical memory is divided into sets of finite size called as ______ (chương 4)",
        "options": {
        "A": "Vectors",
        "B": "Frames",
        "C": "Pages",
        "D": "Blocks"
        },
        "correct": "B"
    },
    {
        "question": "During the transfer of data between the processor and memory we use ______ (chương 4)",
        "options": {
        "A": "TLB",
        "B": "Cache",
        "C": "Registers",
        "D": "Buffers"
        },
        "correct": "C"
    },
    {
        "question": "The smallest entity of memory is called _______ (chương 4)",
        "options": {
        "A": "Cell",
        "B": "Instance",
        "C": "Unit",
        "D": "Block"
        },
        "correct": "A"
    },
    {
        "question": "If a system is 64 bit machine, then the length of each word will be _______ (chương 4)",
        "options": {
        "A": "12 bytes",
        "B": "8 bytes",
        "C": "16 bytes",
        "D": "4 bytes"
        },
        "correct": "B"
    },
    {
        "question": "_____ method is used to map logical addresses of variable length onto physical memory. (chương 4)",
        "options": {
        "A": "Segmentation",
        "B": "Overlays",
        "C": "Paging with segmentation",
        "D": "Paging"
        },
        "correct": "A"
    },
    {
        "question": "An 24 bit address generates an address space of ______ locations. (chương 4)",
        "options": {
        "A": "4096",
        "B": "248",
        "C": "1024",
        "D": "16,777,216"
        },
        "correct": "D"
    },
    {
        "question": "When using the Big Endian assignment to store a number, the sign bit of the number is stored in _____ (chương 4)",
        "options": {
        "A": "None of the mentioned",
        "B": "The higher order byte of the word",
        "C": "Can’t say",
        "D": "The lower order byte of the word"
        },
        "correct": "B"
    },
//p2
    {
        "question": "Does the Load instruction do the following operation/s? (chương 4)",
        "options": {
        "A": "Loads the contents of a location onto the accumulators",
        "B": "Loads the contents of a disc onto a memory location",
        "C": "Load the contents of the PCB onto the register",
        "D": "None of the mentioned"
        },
        "correct": "A"
    },
    {
        "question": "The instruction, Add #45,R1 does _______ (chương 4)",
        "options": {
        "A": "Finds the memory location 45 and adds that content to that of R1",
        "B": "None of the mentioned",
        "C": "Adds the value of 45 to the address of R1 and stores 45 in that address",
        "D": "Adds 45 to the value of R1 and stores it in R1"
        },
        "correct": "D"
    },
    {
        "question": "The BOOT sector files of the system are stored in ___________ (chương 4)",
        "options": {
        "A": "Fast solid state chips in the motherboard",
        "B": "Harddisk",
        "C": "ROM",
        "D": "RAM"
        },
        "correct": "C"
    },
    {
        "question": "Complete the following analogy:- Registers are to RAM’s as Cache’s are to ___________ (chương 4)",
        "options": {
        "A": "Overlays",
        "B": "System stacks",
        "C": "Page Table",
        "D": "TLB"
        },
        "correct": "D"
    },
    {
        "question": "_____ addressing mode is most suitable to change the normal sequence of execution of instructions. (chương 4)",
        "options": {
        "A": "Indirect",
        "B": "Immediate",
        "C": "Relative",
        "D": "Index with Offset"
        },
        "correct": "C"
    },
    {
        "question": "Add #45, when this instruction is executed the following happen/s _______ (chương 4)",
        "options": {
        "A": "None of the mentioned",
        "B": "The processor raises an error and requests for one more operand",
        "C": "The value 45 gets added to the value on the stack and is pushed onto the stack",
        "D": "The value stored in memory location 45 is retrieved and one more operand is requested"
        },
        "correct": "D"
    },
    {
        "question": "The transfer of large chunks of data with the involvement of the processor is done by _______ (chương 4)",
        "options": {
        "A": "User system programs",
        "B": "DMA controller",
        "C": "Arbitrator",
        "D": "None of the mentioned"
        },
        "correct": "B"
    },
    {
        "question": "The technique used to store programs larger than the memory is ____________ (chương 4)",
        "options": {
        "A": "Both Extension registers and Buffers",
        "B": "Overlays",
        "C": "Extension registers",
        "D": "Buffers"
        },
        "correct": "B"
    },
    {
        "question": "The addressing mode, where you directly specify the operand value is _______ (chương 4)",
        "options": {
        "A": "Direct",
        "B": "Relative",
        "C": "Immediate",
        "D": "Definite"
        },
        "correct": "C"
    },
    {
        "question": "The addressing mode/s, which uses the PC instead of a general purpose register is ______ (chương 4)",
        "options": {
        "A": "Relative",
        "B": "Direct",
        "C": "Indexed with offset",
        "D": "Both Indexed with offset and direct"
        },
        "correct": "A"
    },
    {
        "question": "When generating physical addresses from a logical address the offset is stored in __________ (chương 4)",
        "options": {
        "A": "Shift register",
        "B": "Page table",
        "C": "Translation look-aside buffer",
        "D": "Relocation register"
        },
        "correct": "D"
    },
    {
        "question": "If we want to perform memory or arithmetic operations on data in Hexa-decimal mode then we use _________ symbol before the operand. (chương 4)",
        "options": {
        "A": "~",
        "B": "*",
        "C": "!",
        "D": "$"
        },
        "correct": "D"
    },
    {
        "question": "The effective address of the following instruction is MUL 5(R1,R2). (chương 4)",
        "options": {
        "A": "5+R1+R2",
        "B": "5*([R1]+[R2])",
        "C": "5+[R1]+[R2]",
        "D": "5+(R1*R2)"
        },
        "correct": "C"
    },
    {
        "question": "Which of the following techniques used to effectively utilize main memory? (chương 4)",
        "options": {
        "A": "Dynamic loading",
        "B": "Dynamic linking",
        "C": "Both Dynamic linking and loading",
        "D": "Address binding"
        },
        "correct": "A"
    },
    {
        "question": "The unit which acts as an intermediate agent between memory and backing store to reduce process time is ___________ (chương 4)",
        "options": {
        "A": "TLB’s",
        "B": "Cache",
        "C": "Page tables",
        "D": "Registers"
        },
        "correct": "B"
    },
    {
        "question": "When we use auto increment or auto decrements, which of the following is/are true? 1) In both, the address is used to retrieve the operand and then the address gets altered; 2) In auto increment, the operand is retrieved first and then the address altered; 3) Both of them can be used on general purpose registers as well as memory locations (chương 4)",
        "options": {
        "A": "2, 3",
        "B": "1, 3",
        "C": "2",
        "D": "1, 2, 3"
        },
        "correct": "A"
    },
    {
        "question": "The addressing mode which makes use of in-direction pointers is ______ (chương 4)",
        "options": {
        "A": "Relative addressing mode",
        "B": "Index addressing mode",
        "C": "Offset addressing mode",
        "D": "Indirect addressing mode"
        },
        "correct": "D"
    },
    {
        "question": "Add #%01011101,R1 , when this instruction is executed then _________ (chương 4)",
        "options": {
        "A": "The binary addition between the operands takes place",
        "B": "The addition doesn’t take place, whereas this is similar to a MOV instruction",
        "C": "None of the mentioned",
        "D": "The Numerical value represented by the binary value is added to the value of R1"
        },
        "correct": "A"
    },
    {
        "question": "a) EA = 5+R1 (chương 4)",
        "options": {
        "A": "EA = 5+[R1]",
        "B": "EA = [R1]",
        "C": "EA = R1"
        },
        "correct": "A"
    },
    {
        "question": "In the case of, Zero-address instruction method the operands are stored in _____ (chương 4)",
        "options": {
        "A": "Accumulators",
        "B": "Cache",
        "C": "Registers",
        "D": "Push down stack"
        },
        "correct": "D"
    }
    ];
    const chapters = {
      1: questions.filter(q => q.question.includes("(chương 1)")), 2: questions.filter(q => q.question.includes("(chương 2)")),
      3: questions.filter(q => q.question.includes("(chương 3)")), 4: questions.filter(q => q.question.includes("(chương 4)"))
    };
    let currentQuestion = 0, correctAnswers = 0, totalAnswered = 0, selectedQuestions = [], isAudioPlaying = false, currentTrack = null, answers = [];
    const audio = document.getElementById('background-music'), toggleAudioBtn = document.getElementById('toggle-audio'),
    playlistContainer = document.getElementById('playlist'), skipBtn = document.getElementById('skip'), scoreCounter = document.getElementById('score-counter'),
    backBtn = document.getElementById('back'), chapterSelect = document.getElementById('chapter-select'), startQuizBtn = document.getElementById('start-quiz'),
    startScreen = document.getElementById('start-screen'), quizContainer = document.getElementById('quiz-container'), 
    finalResultContainer = document.getElementById('final-result-container'), finalResultEl = document.getElementById('final-result'),
    iconOn = document.querySelector('.icon-on'), iconOff = document.querySelector('.icon-off'), navGrid = document.getElementById('nav-grid');
    const playlist = [ { value: 'tiktik.mp3', name: 'Clock Tick' }, { value: 'MatKetNoi.mp3', name: 'Mất Kết Nối' }, { value: 'NhacKhongLoiGuitar.mp3', name: 'Nhạc Không Lời Guitar' }, { value: 'GapEmDungLuc.mp3', name: 'Gặp Em Đúng Lúc' }, { value: 'TuoiTreTheHeBacHo.mp3', name: 'Tuổi Trẻ Thế Hệ Bác Hồ' }, { value: 'NhacThai.mp3', name: 'Nhạc Thái Lan' } ];
    
    function updateAudioButtonUI() { iconOn.style.display = isAudioPlaying ? 'block' : 'none'; iconOff.style.display = isAudioPlaying ? 'none' : 'block'; }
    toggleAudioBtn.addEventListener('click', () => { isAudioPlaying = !isAudioPlaying; if (isAudioPlaying) { if (audio.src) audio.play().catch(e => console.log('Autoplay prevented')); playlistContainer.style.display = 'block'; } else { audio.pause(); playlistContainer.style.display = 'none'; } updateAudioButtonUI(); });
    function initPlaylist() { playlistContainer.innerHTML = ''; playlist.forEach(track => { const item = document.createElement('div'); item.classList.add('playlist-item'); item.textContent = track.name; item.dataset.src = track.value; item.addEventListener('click', () => { selectTrack(track); playlistContainer.style.display = 'none'; }); playlistContainer.appendChild(item); }); selectTrack(playlist[2], false); }
    function selectTrack(track, shouldPlay = true) { currentTrack = track; audio.src = track.value; audio.loop = true; updatePlaylistUI(); if (isAudioPlaying && shouldPlay) { audio.play().catch(e => console.log('Autoplay prevented')); } }
    function updatePlaylistUI() { document.querySelectorAll('.playlist-item').forEach(item => { item.classList.toggle('playing', item.dataset.src === currentTrack.value); }); }
    function updateScoreCounter() { scoreCounter.textContent = `Đã làm: ${totalAnswered}/${selectedQuestions.length}`; }
    function shuffleArray(array) { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[array[i], array[j]] = [array[j], array[i]]; } return array; }
    function shuffleOptions(question) { const optionsArray = shuffleArray(Object.entries(question.options)); return Object.fromEntries(optionsArray); }
    function shuffleQuestions(questionsArray) { return shuffleArray([...questionsArray]).map(q => ({...q, options: shuffleOptions(q)})); }
    
    function renderQuestionNavPanel() {
        navGrid.innerHTML = '';
        selectedQuestions.forEach((_, index) => {
            const navBtn = document.createElement('button');
            navBtn.classList.add('nav-question-btn');
            navBtn.textContent = index + 1;
            navBtn.dataset.index = index;
            navBtn.addEventListener('click', () => jumpToQuestion(index));
            navGrid.appendChild(navBtn);
        });
        updateNavPanelUI();
    }
    function updateNavPanelUI() {
        const navButtons = document.querySelectorAll('.nav-question-btn');
        navButtons.forEach((btn, index) => {
            btn.className = 'nav-question-btn'; // Reset class
            const answer = answers[index];
            if (answer.completed) {
                if (answer.selected === selectedQuestions[index].correct) { btn.classList.add('answered-correct'); } 
                else if (answer.selected === 'skipped') { btn.classList.add('answered-skipped'); } 
                else { btn.classList.add('answered-incorrect'); }
            }
            if (index === currentQuestion) { btn.classList.add('current-question'); }
        });
    }
    function jumpToQuestion(index) { currentQuestion = index; displayQuestion(); }

    function displayQuestion() {
        startScreen.style.display = 'none';
        quizContainer.style.display = 'block';
        finalResultContainer.style.display = 'none';
        if (currentQuestion >= selectedQuestions.length) { showResult(); return; }
        
        const q = selectedQuestions[currentQuestion];
        const answer = answers[currentQuestion];
        
        backBtn.disabled = currentQuestion === 0;
        skipBtn.style.display = (answer.completed) ? 'none' : 'inline-block';
        document.getElementById('question').innerHTML = `<h3>Câu ${currentQuestion + 1}: ${q.question}</h3>`;
        
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = '';
        for (const [key, value] of Object.entries(q.options)) {
            const disabled = answer.completed ? 'disabled' : '';
            const disabledClass = answer.completed ? 'disabled' : '';
            /*
             ==================================================================
             ===> CẢI TIẾN 2: Bỏ hiển thị A, B, C, D trước đáp án       <===
             ==================================================================
            */
            optionsDiv.innerHTML += `<label class="${disabledClass}"><input type="radio" name="answer" value="${key}" ${disabled}>${value}</label>`;
        }
        document.getElementById('result').innerHTML = '';
        
        const existingNextBtn = document.getElementById('next-btn');
        if (existingNextBtn) existingNextBtn.remove();
        if (answer.completed) {
            showAnswerFeedback(q, answer);
            addNextButton();
        } else {
            document.querySelectorAll('.options label').forEach(label => {
                label.addEventListener('click', () => {
                    if (answers[currentQuestion].completed) return;
                    const selectedValue = label.querySelector('input').value;
                    processAnswer(selectedValue);
                });
            });
        }
        updateNavPanelUI();
    }
    
    function showAnswerFeedback(question, answer) {
        document.querySelectorAll('.options label').forEach(label => {
            const radio = label.querySelector('input');
            label.classList.add('disabled');
            if (radio.value === question.correct) label.classList.add('correct');
            if (radio.value === answer.selected && radio.value !== question.correct) label.classList.add('incorrect');
        });
        // const resultDiv = document.getElementById('result');
        // if (answer.selected === question.correct) { resultDiv.innerHTML = `<span class="correct">Tuyệt Vời! 🎉🎉🎉</span>`; } 
        // else if (answer.selected === 'skipped'){ resultDiv.innerHTML = `<span class="incorrect">Bạn đã bỏ qua. Đáp án là: ${question.correct}</span>`; } 
        // else { resultDiv.innerHTML = `<span class="incorrect">Sai mất rùi! 😞😞😞</span>`; }
    }

    function processAnswer(selectedValue) {
        const q = selectedQuestions[currentQuestion];
        if (!answers[currentQuestion].completed) {
            answers[currentQuestion] = { selected: selectedValue, completed: true };
            if (!answers[currentQuestion].isCounted) {
                totalAnswered++;
                if (selectedValue === q.correct) correctAnswers++;
                answers[currentQuestion].isCounted = true;
            }
        }
        updateScoreCounter();
        showAnswerFeedback(q, answers[currentQuestion]);
        skipBtn.style.display = 'none';
        addNextButton();
        updateNavPanelUI();
    }
    function skipQuestion() { processAnswer('skipped'); }
    function goNext() { if (currentQuestion < selectedQuestions.length - 1) { jumpToQuestion(currentQuestion + 1); } else { showResult(); } }
    function goBack() { if (currentQuestion > 0) { jumpToQuestion(currentQuestion - 1); } }
    
    function addNextButton() {
        const controls = document.getElementById('controls');
        let nextBtn = document.getElementById('next-btn');
        if (!nextBtn) { nextBtn = document.createElement('button'); nextBtn.id = 'next-btn'; controls.appendChild(nextBtn); }
        nextBtn.textContent = (currentQuestion < selectedQuestions.length - 1) ? 'Tiếp' : 'Xem Kết Quả';
        nextBtn.onclick = goNext;
    }

    function showResult() {
        audio.pause();
        quizContainer.style.display = 'none';
        finalResultContainer.style.display = 'block';
        const percentage = (totalAnswered > 0) ? (correctAnswers / totalAnswered) * 100 : 0;
        let message = '';
        if (percentage == 100) message = "Xuất sắc! Bạn đạt điểm tuyệt đối! 🌟";
        else if (percentage >= 80) message = "Rất tốt! Bạn nắm vững kiến thức. 👏";
        else if (percentage >= 50) message = "Khá tốt, nhưng bạn có thể cải thiện thêm. 💪";
        else message = "Bạn cần ôn tập thêm nhé! 📚";
        finalResultEl.innerHTML = `<h2>Kết quả của bạn</h2> <p>Số câu đã trả lời: ${totalAnswered}/${selectedQuestions.length}</p> <p>Số câu đúng: <span class="correct">${correctAnswers}</span></p> <p>Tỷ lệ đúng: ${percentage.toFixed(2)}%</p> <p>${message}</p> <button onclick="restartQuiz()">Làm lại chương này</button> <button onclick="backToChapterSelection()">Chọn chương khác</button>`;
    }
    
    function resetState() { currentQuestion = 0; correctAnswers = 0; totalAnswered = 0; finalResultContainer.style.display = 'none'; updateScoreCounter(); }
    function restartQuiz() { resetState(); selectedQuestions = shuffleQuestions(selectedQuestions); answers = Array(selectedQuestions.length).fill(null).map(() => ({ selected: null, completed: false, isCounted: false })); updateScoreCounter(); renderQuestionNavPanel(); displayQuestion(); if (isAudioPlaying) audio.play().catch(e => console.log(e)); }
    function backToChapterSelection() { resetState(); quizContainer.style.display = 'none'; startScreen.style.display = 'block'; }
    
    startQuizBtn.addEventListener('click', () => {
        const selectedChapter = chapterSelect.value;
        if (selectedChapter === 'all') { selectedQuestions = shuffleQuestions(questions); } 
        else { selectedQuestions = shuffleQuestions(chapters[selectedChapter]); }
        if (selectedQuestions.length === 0){ alert("Chương này không có câu hỏi nào."); return; }
        resetState();
        answers = Array(selectedQuestions.length).fill(null).map(() => ({ selected: null, completed: false, isCounted: false }));
        updateScoreCounter();
        renderQuestionNavPanel();
        displayQuestion();
    });

    skipBtn.addEventListener('click', skipQuestion);
    backBtn.addEventListener('click', goBack);

    initPlaylist();
    updateAudioButtonUI();
    backToChapterSelection();
  </script>
</body>
</html>
